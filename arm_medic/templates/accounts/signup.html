{% extends "base.html" %}

{% block content %}
<h2>Регистрация медицинского сотрудника</h2>
<form method="post">
    {% csrf_token %}
    <div class="form-group">
        <label for="id_username">Логин:</label>
        {{ form.username }}
        {{ form.username.errors }}
    </div>
    <div class="form-group">
        <label for="id_phone">Телефон:</label>
        {{ form.phone }}
        {{ form.phone.errors }}
    </div>
    <div class="form-group">
        <label for="id_password1">Пароль:</label>
        {{ form.password1 }}
        {{ form.password1.errors }}
    </div>
    <div class="form-group">
        <label for="id_password2">Подтверждение пароля:</label>
        {{ form.password2 }}
        {{ form.password2.errors }}
    </div>
    <div class="form-group">
        <label for="id_role">Роль:</label>
        {{ form.role }}
        {{ form.role.errors }}
    </div>
    <div class="form-group" id="position-field">
        <label for="id_position">Должность/Специальность:</label>
        {{ form.position }}
        {{ form.position.errors }}
    </div>
    <button type="submit" class="btn btn-primary">Зарегистрироваться</button>
</form>

<script>
document.getElementById('id_role').addEventListener('change', function() {
    const positionField = document.getElementById('position-field');
    const role = this.value;
    
    if (role === 'doctor') {
        positionField.querySelector('label').textContent = 'Специальность:';
        positionField.style.display = 'block';
    } else if (role === 'nurse') {
        positionField.querySelector('label').textContent = 'Должность:';
        positionField.style.display = 'block';
    } else {
        positionField.style.display = 'none';
    }
});

// Инициализация при загрузке
document.addEventListener('DOMContentLoaded', function() {
    const roleSelect = document.getElementById('id_role');
    const event = new Event('change');
    roleSelect.dispatchEvent(event);
});
</script>
{% endblock %}